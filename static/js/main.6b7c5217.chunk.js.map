{"version":3,"sources":["logo.svg","components/Header.js","components/Footer.js","components/Loading.js","App.js","reportWebVitals.js","index.js","models/index.js","stores/user.js","stores/history.js","stores/image.js","stores/auth.js","stores/index.js"],"names":["Header","styled","header","Logo","img","StyledLink","NavLink","Login","div","StyledButton","Button","Component","observer","history","useHistory","useState","useStores","UserStore","AuthStore","useEffect","pullUser","src","LogoUrl","alt","to","activeClassName","exact","currentUser","attributes","username","type","onClick","logout","console","log","push","Footer","footer","Loading","Home","lazy","History","About","Register","App","fallback","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","AV","init","appId","appKey","serverURL","Auth","register","password","user","User","setUsername","setPassword","Promise","resolve","reject","signUp","loginedUser","error","login","logIn","logOut","getCurrentUser","current","Uploader","add","file","filename","item","Object","avFile","File","set","save","serverFile","find","page","limit","query","Query","include","skip","descending","equalTo","results","catch","this","observable","action","newList","list","concat","isLoading","append","length","hasMore","message","finally","newFilename","newFile","isUploading","err","isLogin","values","resetUser","HistoryStore","reset","ImageStore","context","createContext","window","stores","useContext"],"mappings":"kNAAe,MAA0B,iC,wDCQnCA,EAASC,IAAOC,OAAV,kOAQNC,EAAOF,IAAOG,IAAV,+DAKJC,EAAaJ,YAAOK,IAAPL,CAAH,kNAcVM,EAAQN,IAAOO,IAAV,kDAGLC,EAAeR,YAAOS,IAAPT,CAAH,0EAmDHU,EA9CIC,aAAS,WAE1B,IAAMC,EAAUC,cAEhB,EAA8BC,oBAAS,GAAvC,mBACA,GADA,UACiCC,eAAzBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,UAkBnB,OAJAC,qBAAU,WACRF,EAAUG,aACV,IAGE,eAACpB,EAAD,WACE,cAACG,EAAD,CAAMkB,IAAKC,EAASC,IAAI,KACxB,gCACE,cAAClB,EAAD,CAAYmB,GAAG,IAAIC,gBAAgB,SAASC,OAAK,EAAjD,0BACA,cAACrB,EAAD,CAAYmB,GAAG,WAAWC,gBAAgB,SAA1C,0BACA,cAACpB,EAAD,CAAYmB,GAAG,SAASC,gBAAgB,SAAxC,6BAEF,cAAClB,EAAD,UAEIU,EAAUU,YAAc,qCACrBV,EAAUU,YAAYC,WAAWC,SAAS,cAACpB,EAAD,CAAcqB,KAAK,UAAUC,QA3B/D,WACnBb,EAAUc,UA0B2C,6BAEvC,qCACJ,cAACvB,EAAD,CAAcqB,KAAK,UAAUC,QA3BrB,WAClBE,QAAQC,IAAI,8CACZrB,EAAQsB,KAAK,WAyBH,0BACA,cAAC1B,EAAD,CAAcqB,KAAK,UAAUC,QAxBlB,WACrBE,QAAQC,IAAI,8CACZrB,EAAQsB,KAAK,cAsBH,qCC9ERC,EAASnC,IAAOoC,OAAV,+GAcG1B,MAPf,WACI,OACI,cAACyB,EAAD,UACI,sDCLGE,EANC,WACZ,OACI,8CCYFC,G,OAAOC,gBAAK,kBAAM,+DAClBC,EAAUD,gBAAK,kBAAM,8DACrBE,EAAQF,gBAAK,kBAAM,iCACnBjC,EAAQiC,gBAAK,kBAAM,+DACnBG,EAAWH,gBAAK,kBAAM,+DAwBbI,MAtBf,WACE,OACE,qCACE,cAAC,EAAD,IACA,+BACE,cAAC,WAAD,CAAUC,SAAU,cAAC,EAAD,IAApB,SACE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOC,KAAK,IAAIpB,OAAK,EAACqB,UAAWR,IACjC,cAAC,IAAD,CAAOO,KAAK,WAAWC,UAAWN,IAClC,cAAC,IAAD,CAAOK,KAAK,SAASC,UAAWL,IAChC,cAAC,IAAD,CAAOI,KAAK,SAASC,UAAWxC,IAChC,cAAC,IAAD,CAAOuC,KAAK,YAAYC,UAAWJ,WAKzC,cAAC,EAAD,QC3BSK,G,OAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,+BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,Q,MCGdQ,IAASC,OACD,cAAC,IAAD,UACI,cAAC,EAAD,MAERC,SAASC,eAAe,SAM5BZ,K,gCCpBA,yFAEAa,IAAGC,KAAK,CACNC,MAAO,oCACPC,OAAQ,2BACRC,UAAW,yCAGb,IAAMC,EAAO,CACXC,SADW,SACFtC,EAAUuC,GACjB,IAAIC,EAAO,IAAIC,OAGf,OAFAD,EAAKE,YAAY1C,GACjBwC,EAAKG,YAAYJ,GACV,IAAIK,SAAQ,SAACC,EAASC,GAC3BN,EAAKO,SAASzB,MAAK,SAAA0B,GAAW,OAAIH,EAAQG,MAAc,SAAAC,GAAK,OAAIH,EAAOG,UAG5EC,MATW,SASLlD,EAAUuC,GACd,OAAO,IAAIK,SAAQ,SAACC,EAASC,GAC3BL,OAAKU,MAAMnD,EAAUuC,GAAUjB,MAAK,SAAA0B,GAAW,OAAIH,EAAQG,MAAc,SAAAC,GAAK,OAAIH,EAAOG,UAG7F9C,OAdW,WAeTsC,OAAKW,UAEPC,eAjBW,WAkBT,OAAOZ,OAAKa,YAIVC,EAAW,CACfC,IADe,SACXC,EAAMC,GACR,IAAMC,EAAO,IAAI3B,IAAG4B,OAAO,SACrBC,EAAS,IAAI7B,IAAG8B,KAAKJ,EAAUD,GAIrC,OAHAE,EAAKI,IAAI,WAAYL,GACrBC,EAAKI,IAAI,QAAS/B,IAAGS,KAAKa,WAC1BK,EAAKI,IAAI,MAAOF,GACT,IAAIjB,SAAQ,SAACC,EAASC,GAC3Ba,EAAKK,OAAO1C,MAAK,SAAC2C,GAAD,OAAcpB,EAAQoB,MAAa,SAAAhB,GAAK,OAAIH,EAAOG,UAIxEiB,KAZe,YAYU,IAAD,IAAlBC,YAAkB,MAAb,EAAa,MAAVC,aAAU,MAAJ,GAAI,EAChBC,EAAQ,IAAIrC,IAAGsC,MAAM,SAM3B,OALAD,EAAME,QAAQ,SACdF,EAAMD,MAAMA,GACZC,EAAMG,KAAKL,EAAKC,GAChBC,EAAMI,WAAW,aACjBJ,EAAMK,QAAQ,QAAS1C,IAAGS,KAAKa,WACxB,IAAIV,SAAQ,SAACC,EAAQC,GAC1BuB,EAAMH,OACH5C,MAAK,SAAAqD,GAAO,OAAI9B,EAAQ8B,MACxBC,OAAM,SAAA3B,GAAK,OAAIH,EAAOG,Y,+JCpChB,M,iIATb,WACE4B,KAAK/E,YAAcuC,IAAKgB,mB,uBAG1B,WACEwB,KAAK/E,YAAc,S,8CAPpBgF,K,yEAAyB,Q,oCAEzBC,K,0GAIAA,K,iFC6BY,M,2LA9BbX,MAAQ,G,0CAGR,SAAeY,GACbH,KAAKI,KAAOJ,KAAKI,KAAKC,OAAOF,K,kBAG/B,WAAe,IAAD,OACZH,KAAKM,WAAY,EACjB5B,IAASW,KAAK,CAACC,KAAMU,KAAKV,KAAMC,MAAOS,KAAKT,QACzC9C,MAAK,SAAA0D,GACJ,EAAKI,OAAOJ,GACZ,EAAKb,OACFa,EAAQK,OAAS,EAAKjB,QACvB,EAAKkB,SAAU,MAEhBV,OAAM,SAAA3B,GACPsC,IAAQtC,MAAM,2CACfuC,SAAQ,WACT,EAAKL,WAAY,O,mBAGrB,WACEN,KAAKI,KAAO,GACZJ,KAAKM,WAAY,EACjBN,KAAKS,SAAU,EACfT,KAAKV,KAAO,M,uCA9BbW,K,wEAAkB,M,uCAClBA,K,yEAAuB,K,qCACvBA,K,yEAAqB,K,kCACrBA,K,yEAAkB,K,kCAIlBC,K,mGAIAA,K,kGAeAA,K,qECQY,M,8OA7Bb,SAAoBU,GAClBZ,KAAKnB,SAAW+B,I,qBAGlB,SAAgBC,GACdb,KAAKpB,KAAOiC,I,oBAGd,WAAiB,IAAD,OAGd,OAFAb,KAAKc,aAAc,EACnBd,KAAKZ,WAAa,KACX,IAAIrB,SAAQ,SAACC,EAASC,GAC3BS,IAASC,IAAI,EAAKC,KAAM,EAAKC,UAC1BpC,MAAK,SAAA2C,GACJ,EAAKA,WAAaA,EAClBpB,EAAQoB,MACPW,OAAM,SAAAgB,GACPL,IAAQtC,MAAM,+BACbuC,SAAQ,WACT,EAAKG,aAAc,U,mBAI3B,WACEd,KAAKc,aAAc,EACnBd,KAAKZ,WAAa,S,2CA9BnBa,K,wEAAsB,M,kCACtBA,K,yEAAkB,Q,yCAClBA,K,yEAAyB,K,wCACzBA,K,yEAAwB,Q,uCAExBC,K,2GAIAA,K,sGAIAA,K,oGAeAA,K,qEC6BY,M,8HAhDb,SAAmBc,GACjBhB,KAAKgB,QAAUA,I,yBAGjB,SAAoB7F,GAClB6E,KAAKiB,OAAO9F,SAAWA,I,yBAGzB,SAAoBuC,GAClBsC,KAAKiB,OAAOvD,SAAWA,I,mBAGzB,WAAiB,IAAD,OACd,OAAO,IAAIK,SAAQ,SAACC,EAASC,GAC3BT,IAAKa,MAAM,EAAK4C,OAAO9F,SAAU,EAAK8F,OAAOvD,UAC1CjB,MAAK,SAAAkB,GACJpD,EAAUG,WACVsD,EAAQL,MACPoC,OAAM,SAAAgB,GACPxG,EAAU2G,YACVR,IAAQtC,MAAM,4BACdH,EAAO8C,W,sBAKf,WAAoB,IAAD,OACjB,OAAO,IAAIhD,SAAQ,SAACC,EAASC,GAC3BT,IAAKC,SAAS,EAAKwD,OAAO9F,SAAU,EAAK8F,OAAOvD,UAC7CjB,MAAK,SAAAkB,GACJpD,EAAUG,WACVsD,EAAQL,MACPoC,OAAM,SAAAgB,GACPxG,EAAU2G,YACVR,IAAQtC,MAAM,4BACdH,EAAO8C,W,oBAKf,WACEvD,IAAKlC,SACLf,EAAU2G,YACVC,EAAaC,QACbC,EAAWD,Y,yCAlDZnB,K,wEAAoB,CACnB9E,SAAU,GACVuC,SAAU,O,sCAIXwC,K,8GAIAA,K,+GAIAA,K,yGAIAA,K,sGAcAA,K,uGAcAA,K,sECjDGoB,EAAUC,wBAAc,CAC5B/G,YACAD,YACA8G,aACAF,iBAGFK,OAAOC,OAAQ,CACbjH,YACAD,YACA8G,aACAF,gBAGK,IAAM7G,EAAY,kBAAMoH,qBAAWJ,M","file":"static/js/main.6b7c5217.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03c0173b.svg\";","import React,{useState, useEffect} from 'react';\r\nimport LogoUrl from '../logo.svg'\r\nimport {NavLink, useHistory} from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport {Button} from 'antd';\r\nimport {useStores} from '../stores';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst Header = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 22px;\r\n  background: linear-gradient(193deg, rgba(0,0,0,1) 0%, rgba(4,245,255,1) 100%);\r\n  color: #fff;\r\n`;\r\nconst Logo = styled.img`\r\n  display: flex;\r\n  height: 32px;\r\n`;\r\n// 因为 NavLink 已经是个组件，需要这种写法\r\nconst StyledLink = styled(NavLink)`\r\n  color: #fff;\r\n  margin-left: 16px;\r\n  padding-bottom: 2px;\r\n  font-size: 16px;\r\n  \r\n  &:hover {\r\n    color: #fff;\r\n  }\r\n\r\n  &.active {\r\n    border-bottom: 4px solid #015b5f;\r\n  }\r\n`\r\nconst Login = styled.div`\r\n  margin-left: auto;\r\n`\r\nconst StyledButton = styled(Button)`\r\n  margin-left: 12px;\r\n  border-radius: 12px;\r\n`\r\n\r\nconst  Component = observer(() => {\r\n\r\n  const history = useHistory();\r\n\r\n  const [isLogin, setIsLogin] = useState(false);\r\n  const { UserStore, AuthStore } = useStores();\r\n\r\n  const handleLogout = () => {\r\n    AuthStore.logout();\r\n  };\r\n  const handleLogin = () => {\r\n    console.log('跳转到登录页面');\r\n    history.push('/login')\r\n  };\r\n  const handleRegister = () => {\r\n    console.log('跳转到注册页面');\r\n    history.push('/register');\r\n  };\r\n\r\n  useEffect(()=>{\r\n    UserStore.pullUser()\r\n  },[])\r\n\r\n  return (\r\n      <Header>\r\n        <Logo src={LogoUrl} alt=\"\"/>\r\n        <nav>\r\n          <StyledLink to=\"/\" activeClassName=\"active\" exact>首页</StyledLink>\r\n          <StyledLink to=\"/history\" activeClassName=\"active\">历史</StyledLink>\r\n          <StyledLink to=\"/about\" activeClassName=\"active\">关于</StyledLink>\r\n        </nav>\r\n        <Login>\r\n          {\r\n            UserStore.currentUser ? <>\r\n              {UserStore.currentUser.attributes.username}<StyledButton type=\"primary\" onClick={handleLogout}>注销</StyledButton>\r\n\r\n            </> : <>\r\n              <StyledButton type=\"primary\" onClick={handleLogin}>登录</StyledButton>\r\n              <StyledButton type=\"primary\" onClick={handleRegister}>注册</StyledButton>\r\n            </>\r\n          }\r\n        </Login>\r\n      </Header>\r\n  )\r\n})\r\n\r\nexport default Component;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Footer = styled.footer`\r\n  padding: 10px 100px;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  color: #aaa;\r\n`;\r\n\r\nfunction Component(){\r\n    return (\r\n        <Footer>\r\n            <p>github.com/PoyapLi</p>\r\n        </Footer>\r\n    )\r\n}\r\nexport default Component;","import React from 'react';\r\n\r\nconst Loading = ()=>{\r\n    return(\r\n        <div>Loading...</div>\r\n    )\r\n}\r\n\r\nexport default Loading;","import React, {Suspense, lazy} from 'react';\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Loading from \"./components/Loading\";\n\nimport {\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport * as url from \"url\";\n\n// import Home from './pages/Home';\n// import History from \"./pages/History\";\n// import About from \"./pages/About\";\n\nconst Home = lazy(() => import('./pages/Home'));\nconst History = lazy(() => import('./pages/History'));\nconst About = lazy(() => import('./pages/About'));\nconst Login = lazy(() => import('./pages/Login'));\nconst Register = lazy(() => import('./pages/Register'));\n\nfunction App() {\n  return (\n    <>\n      <Header/>\n      <main>\n        <Suspense fallback={<Loading/>}>\n          <Switch>\n            {/*如果不加 exact 参数，任何路由都是首页了*/}\n            <Route path=\"/\" exact component={Home}/>\n            <Route path=\"/history\" component={History}/>\n            <Route path=\"/about\" component={About}/>\n            <Route path=\"/login\" component={Login}/>\n            <Route path=\"/register\" component={Register}/>\n          </Switch>\n        </Suspense>\n      </main>\n\n      <Footer/>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'antd/dist/antd.css'\nimport reportWebVitals from './reportWebVitals';\nimport Model from './models';\nimport {\n    HashRouter as Router\n} from 'react-router-dom';\n\nReactDOM.render(\n        <Router>\n            <App/>\n        </Router>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import AV, { Query, User } from \"leancloud-storage\";\r\n\r\nAV.init({\r\n  appId: \"UqBaAsQMqOQB3rLwNGLTKtOF-gzGzoHsz\",\r\n  appKey: \"uv9EyQmkgX7UjUt4TeVUBhVa\",\r\n  serverURL: \"https://uqbaasqm.lc-cn-n1-shared.com\"\r\n});\r\n\r\nconst Auth = {\r\n  register(username, password){\r\n    let user = new User();\r\n    user.setUsername(username);\r\n    user.setPassword(password);\r\n    return new Promise((resolve, reject)=>{\r\n      user.signUp().then(loginedUser => resolve(loginedUser), error => reject(error))\r\n    });\r\n  },\r\n  login(username, password){\r\n    return new Promise((resolve, reject) => {\r\n      User.logIn(username, password).then(loginedUser => resolve(loginedUser), error => reject(error));\r\n    })\r\n  },\r\n  logout(){\r\n    User.logOut();\r\n  },\r\n  getCurrentUser(){\r\n    return User.current();\r\n  }\r\n};\r\n\r\nconst Uploader = {\r\n  add(file, filename){\r\n    const item = new AV.Object('Image');\r\n    const avFile = new AV.File(filename, file);\r\n    item.set('filename', filename);\r\n    item.set('owner', AV.User.current());\r\n    item.set('url', avFile);\r\n    return new Promise((resolve, reject) => {\r\n      item.save().then((serverFile)=>resolve(serverFile), error => reject(error))\r\n    })\r\n  },\r\n\r\n  find({page=0, limit=10}){\r\n    const query = new AV.Query('Image');\r\n    query.include('owner');\r\n    query.limit(limit);\r\n    query.skip(page*limit);\r\n    query.descending('createdAt')\r\n    query.equalTo('owner', AV.User.current());\r\n    return new Promise((resolve,reject) => {\r\n      query.find()\r\n        .then(results => resolve(results))\r\n        .catch(error => reject(error))\r\n    })\r\n  }\r\n}\r\n\r\nexport {\r\n  Auth,\r\n  Uploader\r\n};","import {observable, action, makeObservable} from 'mobx';\r\nimport {Auth} from '../models';\r\n\r\nclass UserStore {\r\n  // 状态\r\n  @observable currentUser = null;\r\n\r\n  @action pullUser(){\r\n    this.currentUser = Auth.getCurrentUser();\r\n  }\r\n\r\n  @action resetUser(){\r\n    this.currentUser = null;\r\n  }\r\n}\r\n\r\nexport default new UserStore();","import {observable, action} from 'mobx';\r\nimport {Uploader} from '../models';\r\nimport {message} from 'antd';\r\n\r\nclass HistoryStore {\r\n  // 状态\r\n  @observable list = [];\r\n  @observable isLoading = false;\r\n  @observable hasMore = true;\r\n  @observable page = 0 ;\r\n  limit = 10;\r\n\r\n  // 行为，用于改变状态\r\n  @action append(newList) {\r\n    this.list = this.list.concat(newList);\r\n  }\r\n\r\n  @action find(){\r\n    this.isLoading = true;\r\n    Uploader.find({page: this.page, limit: this.limit})\r\n      .then(newList => {\r\n        this.append(newList);\r\n        this.page++;\r\n        if(newList.length < this.limit) {\r\n          this.hasMore = false;\r\n        }\r\n      }).catch(error => {\r\n        message.error('加载数据失败')\r\n    }).finally(()=>{\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n  @action reset(){\r\n    this.list = [];\r\n    this.isLoading = false;\r\n    this.hasMore = true;\r\n    this.page = 0 ;\r\n  }\r\n}\r\n\r\nexport default new HistoryStore();","import {observable, action} from 'mobx';\r\nimport {Uploader} from '../models';\r\nimport {message} from 'antd';\r\n\r\nclass ImageStore {\r\n  // 状态\r\n  @observable filename = \"\";\r\n  @observable file = null;\r\n  @observable isUploading = false;\r\n  @observable serverFile = null;\r\n\r\n  @action setFilename(newFilename){\r\n    this.filename = newFilename;\r\n  }\r\n\r\n  @action setFile(newFile){\r\n    this.file = newFile;\r\n  }\r\n\r\n  @action upload(){\r\n    this.isUploading = true;\r\n    this.serverFile = null;\r\n    return new Promise((resolve, reject) => {\r\n      Uploader.add(this.file, this.filename)\r\n        .then(serverFile => {\r\n          this.serverFile = serverFile;\r\n          resolve(serverFile);\r\n        }).catch(err => {\r\n          message.error('上传失败')\r\n        }).finally(()=>{\r\n          this.isUploading = false;\r\n        })\r\n    })\r\n  }\r\n  @action reset(){\r\n    this.isUploading = false;\r\n    this.serverFile = null;\r\n  }\r\n}\r\n\r\nexport default new ImageStore();","import {observable, action} from 'mobx';\r\nimport {Auth} from '../models';\r\nimport UserStore from './user';\r\nimport HistoryStore from './history';\r\nimport ImageStore from './image';\r\nimport {message} from 'antd';\r\n\r\nclass AuthStore {\r\n  // 状态\r\n  @observable values = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  // 行为，用于改变状态\r\n  @action setIsLogin(isLogin) {\r\n    this.isLogin = isLogin;\r\n  }\r\n\r\n  @action setUsername(username) {\r\n    this.values.username = username;\r\n  }\r\n\r\n  @action setPassword(password) {\r\n    this.values.password = password;\r\n  }\r\n\r\n  @action login() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.login(this.values.username, this.values.password)\r\n        .then(user => {\r\n          UserStore.pullUser();\r\n          resolve(user);\r\n        }).catch(err => {\r\n          UserStore.resetUser();\r\n          message.error('登录失败')\r\n          reject(err);\r\n      })\r\n    })\r\n  }\r\n\r\n  @action register() {\r\n    return new Promise((resolve, reject) => {\r\n      Auth.register(this.values.username, this.values.password)\r\n        .then(user => {\r\n          UserStore.pullUser();\r\n          resolve(user);\r\n        }).catch(err => {\r\n          UserStore.resetUser();\r\n          message.error('注册失败')\r\n          reject(err);\r\n      })\r\n    })\r\n  }\r\n\r\n  @action logout(){\r\n    Auth.logout();\r\n    UserStore.resetUser();\r\n    HistoryStore.reset();\r\n    ImageStore.reset();\r\n  }\r\n}\r\n\r\nexport default new AuthStore();","import React,{createContext, useContext} from \"react\";\r\nimport AuthStore from './auth';\r\nimport UserStore from './user';\r\nimport ImageStore from './image';\r\nimport HistoryStore from './history';\r\n\r\nconst context = createContext({\r\n  AuthStore,\r\n  UserStore,\r\n  ImageStore,\r\n  HistoryStore\r\n});\r\n\r\nwindow.stores ={\r\n  AuthStore,\r\n  UserStore,\r\n  ImageStore,\r\n  HistoryStore\r\n}\r\n\r\nexport const useStores = () => useContext(context)"],"sourceRoot":""}