(this["webpackJsonpreact-epic-1"]=this["webpackJsonpreact-epic-1"]||[]).push([[2],{102:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var r,i,o,c,a,s,u=n(0),p=n(26),l=n.n(p),b=(n(102),n(95)),f=n(33),j=n.p+"static/media/logo.03c0173b.svg",O=n(48),h=n(12),y=n(34),g=n(117),d=n(77),m=n(80),v=n(5),w=y.a.header(r||(r=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 22px;\n  background: linear-gradient(193deg, rgba(0,0,0,1) 0%, rgba(4,245,255,1) 100%);\n  color: #fff;\n"]))),x=y.a.img(i||(i=Object(f.a)(["\n  display: flex;\n  height: 32px;\n"]))),U=Object(y.a)(O.b)(o||(o=Object(f.a)(["\n  color: #fff;\n  margin-left: 16px;\n  padding-bottom: 2px;\n  font-size: 16px;\n  \n  &:hover {\n    color: #fff;\n  }\n\n  &.active {\n    border-bottom: 4px solid #015b5f;\n  }\n"]))),P=y.a.div(c||(c=Object(f.a)(["\n  margin-left: auto;\n"]))),k=Object(y.a)(g.a)(a||(a=Object(f.a)(["\n  margin-left: 12px;\n  border-radius: 12px;\n"]))),z=Object(m.a)((function(){var e=Object(h.f)(),t=Object(u.useState)(!1),n=Object(b.a)(t,2),r=(n[0],n[1],Object(d.a)()),i=r.UserStore,o=r.AuthStore;return Object(u.useEffect)((function(){i.pullUser()}),[]),Object(v.jsxs)(w,{children:[Object(v.jsx)(x,{src:j,alt:""}),Object(v.jsxs)("nav",{children:[Object(v.jsx)(U,{to:"/",activeClassName:"active",exact:!0,children:"\u9996\u9875"}),Object(v.jsx)(U,{to:"/history",activeClassName:"active",children:"\u5386\u53f2"}),Object(v.jsx)(U,{to:"/about",activeClassName:"active",children:"\u5173\u4e8e"})]}),Object(v.jsx)(P,{children:i.currentUser?Object(v.jsxs)(v.Fragment,{children:[i.currentUser.attributes.username,Object(v.jsx)(k,{type:"primary",onClick:function(){o.logout()},children:"\u6ce8\u9500"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")},children:"\u767b\u5f55"}),Object(v.jsx)(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")},children:"\u6ce8\u518c"})]})})]})})),F=y.a.footer(s||(s=Object(f.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n"])));var D=function(){return Object(v.jsx)(F,{children:Object(v.jsx)("p",{children:"github.com/PoyapLi"})})},L=function(){return Object(v.jsx)("div",{children:"Loading..."})},C=(n(109),Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,261))}))),S=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,262))})),I=Object(u.lazy)((function(){return n.e(7).then(n.bind(null,253))})),q=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,254))})),A=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,255))}));var B=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(z,{}),Object(v.jsx)("main",{children:Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(L,{}),children:Object(v.jsxs)(h.c,{children:[Object(v.jsx)(h.a,{path:"/",exact:!0,component:C}),Object(v.jsx)(h.a,{path:"/history",component:S}),Object(v.jsx)(h.a,{path:"/about",component:I}),Object(v.jsx)(h.a,{path:"/login",component:q}),Object(v.jsx)(h.a,{path:"/register",component:A})]})})}),Object(v.jsx)(D,{})]})},M=(n(115),function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,256)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))});n(28);l.a.render(Object(v.jsx)(O.a,{children:Object(v.jsx)(B,{})}),document.getElementById("root")),M()},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n(29),i=n.n(r);i.a.init({appId:"UqBaAsQMqOQB3rLwNGLTKtOF-gzGzoHsz",appKey:"uv9EyQmkgX7UjUt4TeVUBhVa",serverURL:"https://uqbaasqm.lc-cn-n1-shared.com"});var o={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},login:function(e,t){return new Promise((function(n,i){r.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return i(e)}))}))},logout:function(){r.User.logOut()},getCurrentUser:function(){return r.User.current()}},c={add:function(e,t){var n=new i.a.Object("Image"),r=new i.a.File(t,e);return n.set("filename",t),n.set("owner",i.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,c=new i.a.Query("Image");return c.include("owner"),c.limit(o),c.skip(n*o),c.descending("createdAt"),c.equalTo("owner",i.a.User.current()),new Promise((function(e,t){c.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}}},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r,i,o,c,a,s,u,p,l,b,f,j,O,h,y=n(0),g=n(21),d=n(35),m=n(36),v=n(8),w=(n(60),n(3)),x=n(28),U=new(r=function(){function e(){Object(d.a)(this,e),Object(g.a)(this,"currentUser",i,this)}return Object(m.a)(e,[{key:"pullUser",value:function(){this.currentUser=x.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),i=Object(v.a)(r.prototype,"currentUser",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(r.prototype,"pullUser",[w.f],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(v.a)(r.prototype,"resetUser",[w.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),P=n(96),k=new(o=function(){function e(){Object(d.a)(this,e),Object(g.a)(this,"list",c,this),Object(g.a)(this,"isLoading",a,this),Object(g.a)(this,"hasMore",s,this),Object(g.a)(this,"page",u,this),this.limit=10}return Object(m.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,x.b.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){P.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),c=Object(v.a)(o.prototype,"list",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=Object(v.a)(o.prototype,"isLoading",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(v.a)(o.prototype,"hasMore",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=Object(v.a)(o.prototype,"page",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(v.a)(o.prototype,"append",[w.f],Object.getOwnPropertyDescriptor(o.prototype,"append"),o.prototype),Object(v.a)(o.prototype,"find",[w.f],Object.getOwnPropertyDescriptor(o.prototype,"find"),o.prototype),Object(v.a)(o.prototype,"reset",[w.f],Object.getOwnPropertyDescriptor(o.prototype,"reset"),o.prototype),o),z=new(p=function(){function e(){Object(d.a)(this,e),Object(g.a)(this,"filename",l,this),Object(g.a)(this,"file",b,this),Object(g.a)(this,"isUploading",f,this),Object(g.a)(this,"serverFile",j,this)}return Object(m.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){x.b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){P.b.error("\u4e0a\u4f20\u5931\u8d25")})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),l=Object(v.a)(p.prototype,"filename",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=Object(v.a)(p.prototype,"file",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Object(v.a)(p.prototype,"isUploading",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=Object(v.a)(p.prototype,"serverFile",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(v.a)(p.prototype,"setFilename",[w.f],Object.getOwnPropertyDescriptor(p.prototype,"setFilename"),p.prototype),Object(v.a)(p.prototype,"setFile",[w.f],Object.getOwnPropertyDescriptor(p.prototype,"setFile"),p.prototype),Object(v.a)(p.prototype,"upload",[w.f],Object.getOwnPropertyDescriptor(p.prototype,"upload"),p.prototype),Object(v.a)(p.prototype,"reset",[w.f],Object.getOwnPropertyDescriptor(p.prototype,"reset"),p.prototype),p),F=new(O=function(){function e(){Object(d.a)(this,e),Object(g.a)(this,"values",h,this)}return Object(m.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){x.a.login(e.values.username,e.values.password).then((function(e){U.pullUser(),t(e)})).catch((function(e){U.resetUser(),P.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){x.a.register(e.values.username,e.values.password).then((function(e){U.pullUser(),t(e)})).catch((function(e){U.resetUser(),P.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){x.a.logout(),U.resetUser(),k.reset(),z.reset()}}]),e}(),h=Object(v.a)(O.prototype,"values",[w.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(v.a)(O.prototype,"setIsLogin",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"setIsLogin"),O.prototype),Object(v.a)(O.prototype,"setUsername",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"setUsername"),O.prototype),Object(v.a)(O.prototype,"setPassword",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"setPassword"),O.prototype),Object(v.a)(O.prototype,"login",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"login"),O.prototype),Object(v.a)(O.prototype,"register",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"register"),O.prototype),Object(v.a)(O.prototype,"logout",[w.f],Object.getOwnPropertyDescriptor(O.prototype,"logout"),O.prototype),O),D=Object(y.createContext)({AuthStore:F,UserStore:U,ImageStore:z,HistoryStore:k});window.stores={AuthStore:F,UserStore:U,ImageStore:z,HistoryStore:k};var L=function(){return Object(y.useContext)(D)}}},[[116,3,4]]]);
//# sourceMappingURL=main.6b7c5217.chunk.js.map